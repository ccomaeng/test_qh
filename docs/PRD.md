# PRD: 큐모발검사 종합멘트 자동 생성 시스템

## 1. 제품 개요

### 1.1 프로젝트 목표
모발검사 결과를 입력받아 개인 맞춤형 종합멘트를 자동 생성하는 웹 애플리케이션 개발

### 1.2 문제 정의
- **현재 상황**: 모발검사 결과 해석과 개인 맞춤형 건강 멘트 작성에 많은 시간과 전문 지식 필요
- **해결 과제**: 표준화된 노트 기반으로 정확하고 일관된 건강 멘트를 자동 생성
- **목표 효과**: 검사 결과 해석 시간 단축, 일관된 품질의 건강 상담 제공

### 1.3 대상 사용자
- **1차 사용자**: 모발검사 상담사, 건강 관리사
- **2차 사용자**: 모발검사를 받은 고객 (결과 리포트 수령자)

## 2. 핵심 기능 요구사항

### 2.1 모발검사 데이터 입력
#### 개인정보 입력
- 이름 (필수)
- 나이 (1-120세, 필수)
- 특이사항 (파마/염색/탈색 등 선택사항)

#### 검사 결과 입력
- **유해 중금속 (9종)**: 수은, 비소, 카드뮴, 납, 알루미늄, 바륨, 니켈, 우라늄, 비스무트
  - 상태: 정상/높음
- **영양 미네랄 (11종)**: 칼슘, 마그네슘, 나트륨, 칼륨, 구리, 아연, 인, 철분, 망간, 크롬, 셀레늄
  - 상태: 정상/높음/낮음
- **건강 상태 지표 (6종)**: 인슐린 민감도, 자율신경계, 스트레스 상태, 면역피부건강, 부신활성도, 갑상선활성도
  - 상태: 정상/높음/낮음

### 2.2 종합멘트 생성 시스템
#### 7단계 순차 분석 프로세스
1. **개인정보 섹션**: 연령별 카테고리화
2. **종합 분석**: 5개 노트 파일 기반 정확한 내용 추출
   - 첫 번째 단락 (노트1)
   - 중금속 분석 (노트2)
   - 영양 미네랄 분석 (노트3)
   - 건강 지표 분석 (노트4)
   - 요약 설명 (노트5)
3. **통계 분석**: 내용 분석 및 메트릭
4. **종합 요약**: 핵심 문제 및 관리 방향
5. **영양사 요약**: 전문가 관점 평가
6. **압축 버전**: 950-1000자 요약

#### 템플릿 기반 정확성 보장
- **100% 노트 기반**: AI 생성 없음, 기존 노트에서만 추출
- **정확한 조건 매칭**: 연령, 성별, 특이사항별 세분화된 조건
- **이름 개인화**: [이름] 플레이스홀더 실제 이름으로 대체
- **복합 조건 우선순위**: 개별 항목보다 복합 조건 우선 적용

### 2.3 다중 분석 모드 지원
- **Full Analysis**: 완전한 7단계 종합 리포트
- **Simple Analysis**: 프론트엔드 최적화된 간소화 버전
- **Prompt-Based**: 요구사항 100% 준수 모드

## 3. 비기능적 요구사항

### 3.1 성능 요구사항
- **응답 시간**: API 응답 < 3초
- **정확성**: 노트 기반 100% 정확한 내용 추출
- **동시 사용자**: 최소 10명 동시 접속 지원

### 3.2 사용성 요구사항
- **직관적 UI**: 3단계 이하로 결과 생성 가능
- **반응형 디자인**: 모바일/태블릿/데스크탑 지원
- **접근성**: 한국어 인터페이스, 명확한 라벨링

### 3.3 신뢰성 요구사항
- **데이터 검증**: 입력값 유효성 검사
- **에러 처리**: 사용자 친화적 에러 메시지
- **내용 추적성**: 모든 생성 내용의 소스 노트 추적 가능

## 4. 기술적 제약사항

### 4.1 필수 준수 사항
- **노트 기반 생성**: 5개 마크다운 노트에서만 내용 추출
- **순차 처리**: 1→2→3→4→5→6→7 단계 순서 엄수
- **정확한 템플릿 매칭**: 소스 내용 수정 없이 추출
- **개인화 제한**: [이름] 대체만 허용, 기타 내용 변경 금지

### 4.2 복합 조건 로직
- **연령별 분석**: ≤10세, 11-19세, ≥20세 그룹별 다른 처리
- **조합 조건**: 칼슘+마그네슘, 부신+갑상선 등 상호작용 고려
- **우선순위 규칙**: 복합 조건이 개별 항목 분석보다 우선

## 5. 사용자 시나리오

### 5.1 주요 사용 흐름
1. **검사 결과 입력**: 개인정보 → 중금속 → 미네랄 → 건강지표
2. **분석 실행**: "분석 시작" 버튼 클릭
3. **결과 확인**: 7단계 종합멘트 출력
4. **결과 활용**: 출력 결과를 고객 상담에 활용

### 5.2 예외 시나리오
- **입력 오류**: 필수 정보 누락 시 명확한 안내
- **분석 실패**: 서버 오류 시 사용자 친화적 메시지
- **결과 없음**: 해당 조건의 노트 내용 부재 시 기본 안내

## 6. 성공 지표

### 6.1 정량적 지표
- **정확성**: 노트 기반 내용 추출 정확도 100%
- **완성도**: 입력된 조건에 대한 멘트 생성 완료율 ≥95%
- **성능**: 평균 응답 시간 < 3초

### 6.2 정성적 지표
- **사용성**: 직관적인 인터페이스로 학습 비용 최소화
- **신뢰성**: 일관된 품질의 건강 멘트 제공
- **확장성**: 새로운 노트 추가 시 시스템 확장 용이성

## 7. 향후 확장 계획

### 7.1 단기 계획 (3개월)
- 사용자 피드백 기반 UI/UX 개선
- 추가 건강 지표 항목 확장
- 모바일 앱 버전 검토

### 7.2 중기 계획 (6개월)
- 다국어 지원 (영어, 중국어)
- PDF 리포트 자동 생성
- 관리자 대시보드 구축

### 7.3 장기 계획 (1년)
- 검사 결과 데이터베이스 구축
- 통계 분석 및 트렌드 리포트
- API 외부 연동 지원